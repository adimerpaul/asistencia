import{_ as V,c as u,o as d,w as a,a as e,d as r,W as c,Z as m,f,a7 as p,h as v,Q as w,e as h,b as C,t as Q,ac as x,ad as y}from"./index-Mwczm3Jn.js";import{Q as b,a as t}from"./QItem-B-jDGqV1.js";import{Q as q}from"./QList-B68Qn7WH.js";import{Q as B,C as g}from"./ClosePopup-Bt5lrSSZ.js";import{Q as D,a as _}from"./QTable-BxuA6kbe.js";import{Q as N}from"./QSelect-Dio5GSdy.js";import{Q as E}from"./QForm-RiouWTWd.js";import{Q as P}from"./QPage-F8fVnEV4.js";import"./format-CIujHQBD.js";import"./selection-CxySlGwV.js";import"./QMarkupTable-C1kMFHMm.js";import"./use-fullscreen-BaUj5gfz.js";import"./QChip-D84Fihgf.js";import"./QItemLabel-BultT7H3.js";const S={name:"CursosPage",data(){return{cursos:[],curso:{},dialog:!1,loading:!1,filter:"",columns:[{name:"actions",label:"Acciones",align:"center"},{name:"nombre",label:"Nombre",field:"nombre",align:"left"},{name:"descripcion",label:"Descripción",field:"descripcion",align:"left"},{name:"icono",label:"Icono",field:"icono",align:"center"},{name:"formacion",label:"Formación",field:"formacion",align:"left"}],iconos:[{label:"Quimica",icon:"fa-solid fa-flask-vial"},{label:"Matemáticas",icon:"fa-solid fa-book-open-reader"},{label:"Física",icon:"fa-solid fa-chalkboard-user"},{label:"Biología",icon:"fa-solid fa-graduation-cap"},{label:"Programación",icon:"fa-solid fa-laptop-code"},{label:"Robótica",icon:"fa-solid fa-robot"},{label:"Redes",icon:"fa-solid fa-network-wired"},{label:"Base de Datos",icon:"fa-solid fa-database"},{label:"Lenguajes",icon:"fa-solid fa-language"},{label:"Historia",icon:"fa-solid fa-landmark"},{label:"Geografía",icon:"fa-solid fa-globe"},{label:"Arte",icon:"fa-solid fa-paintbrush"},{label:"Música",icon:"fa-solid fa-music"},{label:"Educación Física",icon:"fa-solid fa-running"},{label:"Literatura",icon:"fa-solid fa-book"},{label:"Ciencias Sociales",icon:"fa-solid fa-users"},{label:"Ciencias Naturales",icon:"fa-solid fa-leaf"},{label:"Computación",icon:"fa-solid fa-desktop"},{label:"Aymara",icon:"fa-solid fa-comments"},{label:"Lenguaje",icon:"fa-solid fa-comment-dots"},{label:"Quechua",icon:"fa-solid fa-comments"},{label:"Otros",icon:"fa-solid fa-ellipsis"}]}},mounted(){this.obtenerCursos()},methods:{obtenerCursos(){this.loading=!0,this.$axios.get("cursos").then(i=>{this.cursos=i.data}).catch(i=>{this.$alert.error(i.response?.data?.message||"Error al obtener cursos")}).finally(()=>{this.loading=!1})},nuevoCurso(){this.curso={},this.dialog=!0},editarCurso(i){this.curso={...i},this.dialog=!0},guardarCurso(){this.loading=!0,this.curso.tipo=this.iconos.find(l=>l.icon===this.curso.icono)?.label||"Otros",(this.curso.id?this.$axios.put(`cursos/${this.curso.id}`,this.curso):this.$axios.post("cursos",this.curso)).then(()=>{this.$alert.success("Curso guardado"),this.dialog=!1,this.obtenerCursos()}).catch(l=>{this.$alert.error(l.response?.data?.message||"Error al guardar")}).finally(()=>{this.loading=!1})},eliminarCurso(i){this.$alert.dialog("¿Desea eliminar este curso?").onOk(()=>{this.loading=!0,this.$axios.delete(`cursos/${i}`).then(()=>{this.$alert.success("Curso eliminado"),this.obtenerCursos()}).catch(l=>{this.$alert.error(l.response?.data?.message||"Error al eliminar")}).finally(()=>{this.loading=!1})})}}},I={class:"text-h6"},z={class:"text-right"};function R(i,l,U,A,s,n){return d(),u(P,{class:"q-pa-md"},{default:a(()=>[e(D,{rows:s.cursos,columns:s.columns,flat:"",bordered:"",dense:"","wrap-cells":"","rows-per-page-options":[0],title:"Cursos",filter:s.filter},{"top-right":a(()=>[e(f,{label:"Nuevo",icon:"add_circle_outline",color:"primary",onClick:n.nuevoCurso,loading:s.loading,"no-caps":""},null,8,["onClick","loading"]),e(p,{modelValue:s.filter,"onUpdate:modelValue":l[0]||(l[0]=o=>s.filter=o),label:"Buscar",dense:"",outlined:"",class:"q-ml-sm"},{append:a(()=>[e(r,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":a(o=>[e(_,{props:o},{default:a(()=>[e(B,{label:"Acciones",color:"primary",size:"sm","no-caps":""},{default:a(()=>[e(q,null,{default:a(()=>[c((d(),u(b,{clickable:"",onClick:k=>n.editarCurso(o.row)},{default:a(()=>[e(t,{avatar:""},{default:a(()=>[e(r,{name:"edit",size:"md"})]),_:1}),e(t,null,{default:a(()=>l[5]||(l[5]=[m("Editar")])),_:1})]),_:2},1032,["onClick"])),[[g]]),c((d(),u(b,{clickable:"",onClick:k=>n.eliminarCurso(o.row.id)},{default:a(()=>[e(t,{avatar:""},{default:a(()=>[e(r,{name:"delete",size:"md"})]),_:1}),e(t,null,{default:a(()=>l[6]||(l[6]=[m("Eliminar")])),_:1})]),_:2},1032,["onClick"])),[[g]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-icono":a(o=>[e(_,{props:o},{default:a(()=>[e(r,{name:o.row.icono,size:"md"},null,8,["name"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"]),e(v,{modelValue:s.dialog,"onUpdate:modelValue":l[4]||(l[4]=o=>s.dialog=o),persistent:""},{default:a(()=>[e(w,{style:{width:"400px"}},{default:a(()=>[e(h,null,{default:a(()=>[C("div",I,Q(s.curso.id?"Editar":"Nuevo")+" Curso",1)]),_:1}),e(h,null,{default:a(()=>[e(E,{onSubmit:n.guardarCurso},{default:a(()=>[e(p,{modelValue:s.curso.nombre,"onUpdate:modelValue":l[1]||(l[1]=o=>s.curso.nombre=o),label:"Nombre",dense:"",outlined:"",class:"q-mb-sm",rules:[o=>!!o||"Requerido"]},null,8,["modelValue","rules"]),e(p,{modelValue:s.curso.descripcion,"onUpdate:modelValue":l[2]||(l[2]=o=>s.curso.descripcion=o),label:"Descripción",dense:"",outlined:"",type:"textarea",hint:""},null,8,["modelValue"]),e(N,{modelValue:s.curso.icono,"onUpdate:modelValue":l[3]||(l[3]=o=>s.curso.icono=o),options:s.iconos,label:"Icono",dense:"",outlined:"","option-label":"label","option-value":"icon","emit-value":"","map-options":"","use-input":"","fill-input":"","input-debounce":"0",rules:[o=>!!o||"Requerido"]},{option:a(o=>[e(b,x(y(o.itemProps)),{default:a(()=>[e(t,{avatar:""},{default:a(()=>[e(r,{name:o.opt.icon},null,8,["name"])]),_:2},1024),e(t,null,{default:a(()=>[m(Q(o.opt.label),1)]),_:2},1024)]),_:2},1040)]),"selected-item":a(o=>[e(r,{name:o.opt.icon},null,8,["name"])]),_:1},8,["modelValue","options","rules"]),C("div",z,[c(e(f,{flat:"",label:"Cancelar",color:"negative"},null,512),[[g]]),e(f,{label:"Guardar",type:"submit",color:"primary",class:"q-ml-sm",loading:s.loading},null,8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const $=V(S,[["render",R]]);export{$ as default};
