import{Q as u,a as c}from"./QBadge-OCdqDiGF.js";import{_ as m,c as g,o as l,w as n,b as t,a2 as d,a as o,Q as p,e as f,t as e,Z as r}from"./index-f0j5J7J4.js";import{Q as h}from"./QTable-CE0s5Pio.js";import{Q as _}from"./QPage-uAwsrSle.js";import"./format-dH-XREpz.js";import"./selection-BqZwZZ_Q.js";import"./QItem-Bx6qN7fO.js";import"./use-fullscreen-MtywWtdr.js";const b={name:"DetalleCursoPage",data(){return{asignacion:null,loading:!0,loadingAsistencia:!1,asistencias:{},columns:[{name:"nombre",label:"Nombre",field:"nombre",align:"left"},{name:"ci",label:"CI",field:"ci",align:"left"}]}},mounted(){this.obtenerDetalle()},methods:{obtenerDetalle(){this.loading=!0,this.$axios.get(`/asignaciones/${this.$route.params.id}`).then(a=>{this.asignacion=a.data,a.data.estudiantes.forEach(s=>{this.asistencias[s.id]=null})}).catch(()=>{this.$alert.error("Error al obtener datos del curso")}).finally(()=>{this.loading=!1})},guardarAsistencia(a){const s=this.asistencias[a];s&&(this.loadingAsistencia=!0,this.$axios.post("/asistencias",{asignacion_id:this.$route.params.id,estudiante_id:a,asistencia:s}).then(()=>{this.$alert.success("Asistencia registrada")}).catch(()=>{this.$alert.error("Error al registrar asistencia")}).finally(()=>{this.loadingAsistencia=!1}))}}},x={key:0,class:"flex flex-center"},v={key:1},Q={class:"text-h6"},y={class:"text-subtitle2"},C={class:"q-mt-sm"},D={class:"text-caption q-mt-sm"};function E(a,s,k,q,i,w){return l(),g(_,{class:"q-pa-md"},{default:n(()=>[s[3]||(s[3]=t("div",{class:"text-h5 text-bold text-primary q-mb-md"},"Detalle del Curso",-1)),i.loading?(l(),d("div",x,[o(u,{color:"primary",size:"40px"})])):(l(),d("div",v,[o(p,{flat:"",bordered:"",class:"q-mb-md"},{default:n(()=>[o(f,null,{default:n(()=>[t("div",Q,e(i.asignacion.curso.nombre),1),t("div",y,e(i.asignacion.curso.descripcion),1),t("div",C,[o(c,{color:"orange",outline:"",class:"q-mr-sm"},{default:n(()=>[r("Formación: "+e(i.asignacion.curso.formacion),1)]),_:1}),o(c,{color:"teal",outline:""},{default:n(()=>[r("Tipo: "+e(i.asignacion.curso.tipo),1)]),_:1})]),t("div",D,[s[0]||(s[0]=r(" Unidad Educativa: ")),t("strong",null,e(i.asignacion.unidadEducativa),1),s[1]||(s[1]=r(" | Gestión: ")),t("strong",null,e(i.asignacion.gestion),1),s[2]||(s[2]=r(" | Año: ")),t("strong",null,e(i.asignacion.anioFormacion),1)])]),_:1})]),_:1}),o(h,{rows:i.asignacion.estudiantes,columns:i.columns,"row-key":"id",title:"Lista de Estudiantes",flat:"",bordered:"",dense:"","rows-per-page-options":[0]},null,8,["rows","columns"])]))]),_:1})}const $=m(b,[["render",E]]);export{$ as default};
