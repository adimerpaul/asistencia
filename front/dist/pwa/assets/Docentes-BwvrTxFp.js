import{_ as V,c as d,o as m,w as a,a as e,W as c,d as u,Z as g,f,a7 as s,h as _,Q as C,e as b,b as h,t as v}from"./index-0jewawln.js";import{Q as D,a as r}from"./QItem-CYzMF0Lo.js";import{a as x}from"./format-XBwitZhB.js";import{Q as k,C as p}from"./ClosePopup-BAAl4YOq.js";import{Q as q}from"./QTd-DrazB54k.js";import{Q as w}from"./QTable-Cnm8kST3.js";import{Q as y}from"./QForm-NhSMC-Iu.js";import{Q as E}from"./QPage-CTGj8175.js";import"./selection-ZwgMqj-P.js";import"./use-fullscreen-CxoFJyAm.js";const N={name:"DocentesPage",data(){return{docentes:[],docente:{},dialog:!1,loading:!1,filter:"",columns:[{name:"actions",label:"Acciones",align:"center"},{name:"nombre",label:"Nombre",field:"nombre",align:"left"},{name:"ci",label:"CI",field:"ci",align:"left"},{name:"email",label:"Email",field:"email",align:"left"},{name:"telefono",label:"Teléfono",field:"telefono",align:"left"}]}},mounted(){this.obtenerDocentes()},methods:{obtenerDocentes(){this.loading=!0,this.$axios.get("docentes").then(n=>{this.docentes=n.data}).catch(n=>{this.$alert.error(n.response?.data?.message||"Error al obtener docentes")}).finally(()=>{this.loading=!1})},nuevoDocente(){this.docente={},this.dialog=!0},editarDocente(n){this.docente={...n},this.dialog=!0},guardarDocente(){this.loading=!0,(this.docente.id?this.$axios.put(`docentes/${this.docente.id}`,this.docente):this.$axios.post("docentes",this.docente)).then(()=>{this.$alert.success("Docente guardado"),this.dialog=!1,this.obtenerDocentes()}).catch(l=>{this.$alert.error(l.response?.data?.message||"Error al guardar")}).finally(()=>{this.loading=!1})},eliminarDocente(n){this.$alert.dialog("¿Desea eliminar este docente?").onOk(()=>{this.loading=!0,this.$axios.delete(`docentes/${n}`).then(()=>{this.$alert.success("Docente eliminado"),this.obtenerDocentes()}).catch(l=>{this.$alert.error(l.response?.data?.message||"Error al eliminar")}).finally(()=>{this.loading=!1})})}}},B={class:"text-h6"},I={class:"text-right"};function U(n,l,S,T,t,i){return m(),d(E,{class:"q-pa-md"},{default:a(()=>[e(w,{rows:t.docentes,columns:t.columns,flat:"",bordered:"",dense:"","wrap-cells":"","rows-per-page-options":[0],title:"Docentes",filter:t.filter},{"top-right":a(()=>[e(f,{label:"Nuevo",icon:"add_circle_outline",color:"primary",onClick:i.nuevoDocente,loading:t.loading,"no-caps":""},null,8,["onClick","loading"]),e(s,{modelValue:t.filter,"onUpdate:modelValue":l[0]||(l[0]=o=>t.filter=o),label:"Buscar",dense:"",outlined:"",class:"q-ml-sm"},{append:a(()=>[e(u,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-actions":a(o=>[e(q,{props:o},{default:a(()=>[e(k,{label:"Acciones",color:"primary",size:"sm","no-caps":""},{default:a(()=>[e(x,null,{default:a(()=>[c((m(),d(D,{clickable:"",onClick:Q=>i.editarDocente(o.row)},{default:a(()=>[e(r,{avatar:""},{default:a(()=>[e(u,{name:"edit"})]),_:1}),e(r,null,{default:a(()=>l[6]||(l[6]=[g("Editar")])),_:1})]),_:2},1032,["onClick"])),[[p]]),c((m(),d(D,{clickable:"",onClick:Q=>i.eliminarDocente(o.row.id)},{default:a(()=>[e(r,{avatar:""},{default:a(()=>[e(u,{name:"delete"})]),_:1}),e(r,null,{default:a(()=>l[7]||(l[7]=[g("Eliminar")])),_:1})]),_:2},1032,["onClick"])),[[p]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"]),e(_,{modelValue:t.dialog,"onUpdate:modelValue":l[5]||(l[5]=o=>t.dialog=o),persistent:""},{default:a(()=>[e(C,{style:{width:"400px"}},{default:a(()=>[e(b,null,{default:a(()=>[h("div",B,v(t.docente.id?"Editar":"Nuevo")+" Docente",1)]),_:1}),e(b,null,{default:a(()=>[e(y,{onSubmit:i.guardarDocente},{default:a(()=>[e(s,{modelValue:t.docente.nombre,"onUpdate:modelValue":l[1]||(l[1]=o=>t.docente.nombre=o),label:"Nombre",dense:"",outlined:"",class:"q-mb-sm",rules:[o=>!!o||"Requerido"]},null,8,["modelValue","rules"]),e(s,{modelValue:t.docente.ci,"onUpdate:modelValue":l[2]||(l[2]=o=>t.docente.ci=o),label:"CI",dense:"",outlined:"",class:"q-mb-sm",rules:[o=>!!o||"Requerido"]},null,8,["modelValue","rules"]),e(s,{modelValue:t.docente.email,"onUpdate:modelValue":l[3]||(l[3]=o=>t.docente.email=o),label:"Email",dense:"",outlined:"",class:"q-mb-sm",type:"email"},null,8,["modelValue"]),e(s,{modelValue:t.docente.telefono,"onUpdate:modelValue":l[4]||(l[4]=o=>t.docente.telefono=o),label:"Teléfono",dense:"",outlined:"",class:"q-mb-sm"},null,8,["modelValue"]),h("div",I,[c(e(f,{flat:"",label:"Cancelar",color:"negative"},null,512),[[p]]),e(f,{label:"Guardar",type:"submit",color:"primary",class:"q-ml-sm",loading:t.loading},null,8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const j=V(N,[["render",U]]);export{j as default};
